{"version":3,"file":"request.js","sources":["common/utils/request.js"],"sourcesContent":["import {getSystemWechatUser} from \"@/common/utils/common.js\"\n\nconst BASE_URL = 'https://springboot-ndhb-168629-7-1364979505.sh.run.tcloudbase.com';\n// const BASE_URL = 'http://127.0.0.1:8080';\n\nexport function getDetailVoicePath(webPath){ \n\tlet user = getSystemWechatUser(); \n\treturn BASE_URL  + webPath + \"?openId=\" + user.openid + \"&thirdType=wechat\";\n}\n\nexport function getWordVoicePath(webPath){ \n\tlet user = getSystemWechatUser(); \n\treturn BASE_URL  + webPath + \"?openId=\" + user.openid + \"&thirdType=wechat\";\n}\n\nexport function request(config={}){\t \n\tlet {\n\t\turl,\n\t\tdata={},\n\t\tmethod=\"GET\",\n\t\theader={}\n\t} = config\n\t\n\tconsole.log(\"url->\",url);\n\tconsole.log(\"data->\",data);\n\t\n\tlet user = getSystemWechatUser();  \n\t\n\turl = BASE_URL+url\n\theader['openId'] = user.openid;\n\theader['thirdType'] = \"wechat\"; \n\theader['X-WX-SERVICE'] = \"springboot-ndhb\"; \n\t\n\treturn new Promise((resolve,reject)=>{\t\t\n\t\tuni.request({\n\t\t\turl,\n\t\t\tdata,\n\t\t\tmethod,\n\t\t\theader, \n\t\t\tsuccess:res=>{ \n\t\t\t\tif(res.data.code==\"200\"){\n\t\t\t\t\tresolve(res.data)\n\t\t\t\t}else if(res.data.code!=\"200\"){\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle:\"错误提示\",\n\t\t\t\t\t\tcontent:res.data.msg,\n\t\t\t\t\t\tshowCancel:false\n\t\t\t\t\t})\n\t\t\t\t\treject(res.data)\n\t\t\t\t}else{\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:res.data.msg,\n\t\t\t\t\t\ticon:\"none\"\n\t\t\t\t\t})\n\t\t\t\t\treject(res.data)\n\t\t\t\t}\t\t\t\t\n\t\t\t},\n\t\t\tfail:err=>{\n\t\t\t\treject(err)\n\t\t\t}\n\t\t})\n\t})\n}\n"],"names":["getSystemWechatUser","uni"],"mappings":";;;AAEA,MAAM,WAAW;AAGV,SAAS,mBAAmB,SAAQ;AAC1C,MAAI,OAAOA,oBAAAA;AACX,SAAO,WAAY,UAAU,aAAa,KAAK,SAAS;AACzD;AAEO,SAAS,iBAAiB,SAAQ;AACxC,MAAI,OAAOA,oBAAAA;AACX,SAAO,WAAY,UAAU,aAAa,KAAK,SAAS;AACzD;AAEO,SAAS,QAAQ,SAAO,IAAG;AACjC,MAAI;AAAA,IACH;AAAA,IACA,OAAK,CAAE;AAAA,IACP,SAAO;AAAA,IACP,SAAO,CAAE;AAAA,EACX,IAAK;AAEJC,gBAAY,MAAA,MAAA,OAAA,iCAAA,SAAQ,GAAG;AACvBA,gBAAY,MAAA,MAAA,OAAA,iCAAA,UAAS,IAAI;AAEzB,MAAI,OAAOD,oBAAAA;AAEX,QAAM,WAAS;AACf,SAAO,QAAQ,IAAI,KAAK;AACxB,SAAO,WAAW,IAAI;AACtB,SAAO,cAAc,IAAI;AAEzB,SAAO,IAAI,QAAQ,CAAC,SAAQ,WAAS;AACpCC,kBAAAA,MAAI,QAAQ;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAQ,SAAK;AACZ,YAAG,IAAI,KAAK,QAAM,OAAM;AACvB,kBAAQ,IAAI,IAAI;AAAA,QAChB,WAAQ,IAAI,KAAK,QAAM,OAAM;AAC7BA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAM;AAAA,YACN,SAAQ,IAAI,KAAK;AAAA,YACjB,YAAW;AAAA,UACjB,CAAM;AACD,iBAAO,IAAI,IAAI;AAAA,QACpB,OAAS;AACJA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAM,IAAI,KAAK;AAAA,YACf,MAAK;AAAA,UACX,CAAM;AACD,iBAAO,IAAI,IAAI;AAAA,QACf;AAAA,MACD;AAAA,MACD,MAAK,SAAK;AACT,eAAO,GAAG;AAAA,MACV;AAAA,IACJ,CAAG;AAAA,EACH,CAAE;AACF;;;;"}