{"version":3,"names":["common_utils_common","getSystemWechatUserForward","playMap","Map","noData","common_vendor","ref","queryParams","pageNum","pageSize","onLoad","e","_e$collectType","collectType","_e$name","name","index","setNavigationBarTitle","title","getEngMain","onPullDownRefresh","onReachBottom","__f__","value","datas","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","code","res","wrap","_callee$","_context","prev","next","common_api_apis","apiGetMyCollect","sent","concat","_toConsumableArray2","data","length","stopPullDownRefresh","hideLoading","stop","_x","apply","arguments","delMyCollect","_ref2","_callee2","id","_callee2$","_context2","apiDelMyCollect","filter","item","_x2","eye","hide","play","type","eid","isPlay","has","get","forEach","findItemById","findWordById","audioUrl","common_utils_request","getDetailVoicePath","getWordVoicePath","innerAudioContext","createInnerAudioContext","autoplay","src","onPlay","onError","onEnded","set","find","includes","wx","createPage","MiniProgramPage"],"sources":["collectSentence.vue","collectSentence.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"layoutCls\">\n\t\t<view class=\"scrollCls\" scroll-y=\"true\" scroll-x=\"false\">\n\t\t\t<view class=\"contentCls\" v-for=\"item in datas\" :key=\"item.id\" v-if=\"datas.length\">\n\t\t\t\t<view class=\"favoriteTimeMainCls\" >\n\t\t\t\t\t<!-- <view class=\"favoriteTextCls\">收藏时间:</view> -->\n\t\t\t\t\t<view class=\"favoriteTimeCls\">{{item.createTime}}</view>\n\t\t\t\t\t<view class=\"favoriteDelCls\" @click=\"delMyCollect(item.id)\">\n\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"25\"  ></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"zhCls\" >\n\t\t\t\t\t{{item.znName}}\n\t\t\t\t</view>\n\t\t\t\t<view class=\"translationCls\">\n\t\t\t\t\t<view class=\"engCls\" >\n\t\t\t\t\t\t{{item.hide=='1'?'***':item.enName}}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"hidCls\">\n\t\t\t\t\t\t<uni-icons :type=\"item.hide=='1'?'eye-slash':'eye'\" size=\"25\" @click=\"eye(item)\"></uni-icons>\n\t\t\t\t\t\t<view class=\"play\" @click.stop=\"play(item, queryParams.collectType)\">\n\t\t\t\t\t\t\t<a-trumpet :isPlay=\"item.isPlay\" size=\"25\" color=\"#28B389\"></a-trumpet>\n\t\t\t\t\t\t\t<!-- <uni-icons type=\"sound\" size=\"30\"  @click=\"play(item)\"></uni-icons> -->\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view> \n\t\t\t<view class=\"loadingLayout\" v-if=\"noData || datas.length\">\n\t\t\t\t<uni-load-more :status=\"noData?'noMore':'loading'\"/>\n\t\t\t</view>\n\t\t</view> \n\t</view>\n</template>\n\n<script setup> \n\timport {ref} from \"vue\";\n\timport {getSystemWechatUserForward} from \"@/common/utils/common.js\";\n\timport {onLoad,onUnload,onReachBottom,onShareAppMessage,onShareTimeline,onPullDownRefresh} from \"@dcloudio/uni-app\"\n\timport {apiGetMyCollect,apiDelMyCollect} from \"@/common/api/apis.js\"\n\timport {getDetailVoicePath,getWordVoicePath} from \"@/common/utils/request.js\";\n\t\n\tgetSystemWechatUserForward();\n\tconst playMap = new Map();\n\t//没有更多\n\tconst noData = ref(false);\n\t\n\tconst queryParams = {\n\t\tpageNum:1,\n\t\tpageSize:10\n\t}\n\t\n\tonLoad((e)=>{\n\t\tlet {collectType=null,name=null} = e;\n\t\tqueryParams.collectType = collectType;\n\t\t//修改导航标题\n\t\tuni.setNavigationBarTitle({\n\t\t\ttitle:name\n\t\t});\n\t\tgetEngMain(); \n\t});\n\t\n\t\n\t//下拉刷新\n\tonPullDownRefresh(()=>{\n\t\tqueryParams.pageNum = 1;\n\t\tgetEngMain();\n\t})\n\t\n\t\n\t//触底加载更多\n\tonReachBottom(()=>{\n\t\tconsole.log(\"触地了-->\");\n\t\tif(noData.value) return;\n\t\tqueryParams.pageNum++\n\t\tgetEngMain();\n\t})\n\t\n\t//我收藏的句子\n\tconst datas=ref([]);\n\t\n\tconst getEngMain =async(code)=>{\n\t\t// uni.showLoading({\n\t\t// \ttitle:\"加载中..\"\n\t\t// })\n\t\tlet res =await apiGetMyCollect(queryParams); \n\t\tconsole.log(\"获取到的收藏数据->\",res);  \n\t\tdatas.value  =  [...datas.value,...res.data] ;\n\t\t\n\t\tif(queryParams.pageSize > res.data.length){\n\t\t\tnoData.value = true;\n\t\t}\n\t\t\n\t\tuni.stopPullDownRefresh();\n\t\tuni.hideLoading(); \n\t}\n\t\n\tconst delMyCollect=async(id)=>{ \n\t\tlet res =await apiDelMyCollect({\n\t\t\tid\n\t\t});   \n\t\tdatas.value = datas.value.filter(item => item.id !== id); \n\t\tuni.stopPullDownRefresh();\n\t\tuni.hideLoading(); \n\t}\n\t\n\t\n\t\n\t// 显示或隐藏\n\tfunction eye(e){\n\t\te.hide = !e.hide;\n\t}\n\tfunction deleteFavorite(e){\n\t\t\n\t}\n\tfunction play(e, type){\n\t\tlet eid = type + e.id; \n\t\t\n\t\te.isPlay = !e.isPlay;\n\t\tif(!e.isPlay){\n\t\t\tif(playMap != null && playMap.has(eid)){\n\t\t\t\tplayMap.get(eid).stop();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif(playMap != null){\n\t\t\tplayMap.forEach((value, id) => {\n\t\t\t  value.stop();\n\t\t\t  if(type == \"detail\"){\n\t\t\t\t  findItemById(id).isPlay = false;\n\t\t\t  }else{\n\t\t\t\t  findWordById(id).isPlay = false;\n\t\t\t  }\n\t\t\t});\n\t\t}\n\t\te.isPlay = true;\n\t\t\n\t\tconsole.log(\"e-1232222222>\",e);\n\t\tlet audioUrl = null; \n\t\tif(type == \"detail\"){\n\t\t\taudioUrl = getDetailVoicePath(e);\n\t\t}else{\n\t\t\taudioUrl = getWordVoicePath(e);\n\t\t}\n\t\t\n\t\tconsole.log(\"音频地址->\",audioUrl);\n\t\tconst innerAudioContext = uni.createInnerAudioContext();\n\t\tinnerAudioContext.autoplay = true;\n\t\tinnerAudioContext.src = audioUrl;\n\t\tinnerAudioContext.onPlay(() => {\n\t\t  console.log('开始播放');\n\t\t  uni.hideLoading();\n\t\t});\n\t\tinnerAudioContext.onError((res) => {\n\t\t\tconsole.log(res)\n\t\t  // console.log(res.errMsg);\n\t\t  // console.log(res.errCode);\n\t\t  uni.hideLoading();\n\t\t});\n\t\tinnerAudioContext.onEnded((res)=>{\n\t\t\tconsole.log(\"停止播放->\",res);\n\t\t\te.isPlay = false;\n\t\t\tuni.hideLoading();\n\t\t})\n\t\t\n\t\tplayMap.set(eid, innerAudioContext);\n\t}\n\t \n\tfunction findItemById(id) {\n\t    return datas.value.find(item => id.includes(item.id));\n\t}\n\t   \n\t  \n</script>\n\n<style lang=\"scss\" scoped>\n.layoutCls{\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\tposition: relative; \n\t\t .scrollCls{  \n\t\t\t// margin-top: 20rpx;\n\t\t\twidth: 100%; \n\t\t\theight: 100vh;\n\t\t\tpadding: 20rpx; \n\t\t\tbox-sizing: border-box; \n\t\t\t.contentCls{ \n\t\t\t\tmargin-top: 60rpx; \n\t\t\t\tbackground: #f3f7f8; \n\t\t\t\tborder-radius: 20rpx;\n\t\t\t\tpadding: 15rpx;  \n\t\t\t\t\n\t\t\t\t.favoriteTimeMainCls{\n\t\t\t\t\tfont-size: 25rpx;\n\t\t\t\t\tpadding: 10rpx;\n\t\t\t\t\tborder-bottom: 1px solid #ebf1f3; \n\t\t\t\t\tdisplay: flex;  \n\t\t\t\t\talign-items: center;\n\t\t\t\t\tbackground: rgba(0, 0, 0, 0.1); \n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tvertical-align: middle;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\t// color: #fff;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tmargin-top: -50rpx;\n\t\t\t\t\t// padding: 20rpx;\n\t\t\t\t\tborder-radius: 20rpx;\n\t\t\t\t\t// top: 0rpx;\n\t\t\t\t\t.favoriteTextCls{\n\t\t\t\t\t\t// background: yellow;\n\t\t\t\t\t\tdisplay: inline-block; \n\t\t\t\t\t\tvertical-align: middle\n\t\t\t\t\t}\n\t\t\t\t\t.favoriteTimeCls{\n\t\t\t\t\t\tdisplay: inline-block; \n\t\t\t\t\t\t// color:$text-font-color-2;\n\t\t\t\t\t\tvertical-align: middle;\n\t\t\t\t\t\tfont-family: monospace; \n\t\t\t\t\t\tfont-weight: normal; \n\t\t\t\t\t\t// width: 19ch;\n\t\t\t\t\t\t// padding-left: 10rpx;\n\t\t\t\t\t\t// background: red;\n\t\t\t\t\t}\n\t\t\t\t\t.favoriteDelCls{\n\t\t\t\t\t\tdisplay: inline-block; \n\t\t\t\t\t\tvertical-align: middle;\n\t\t\t\t\t\t// right: 0;\n\t\t\t\t\t\t:deep(){\n\t\t\t\t\t\t\t.uni-icons{\n\t\t\t\t\t\t\t\tcolor:$brand-theme-color !important;\n\t\t\t\t\t\t\t\t padding-left: 20rpx;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.zhCls{\n\t\t\t\t\tfont-size: 25rpx;\n\t\t\t\t\tpadding: 10rpx;\n\t\t\t\t\tborder-bottom: 1px solid #ebf1f3;\n\t\t\t\t}\n\t\t\t\t.translationCls{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tposition: relative; \n\t\t\t\t\t.engCls{\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\twidth: 0; \n\t\t\t\t\t\tpadding: 10rpx;\n\t\t\t\t\t}\n\t\t\t\t\t.hidCls{\n\t\t\t\t\t\twidth: 150rpx;\t \n\t\t\t\t\t\t// background: red;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t// position: absolute; \n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tright: 0;\n\t\t\t\t\t\t:deep(){\n\t\t\t\t\t\t\t.uni-icons{\n\t\t\t\t\t\t\t\tcolor:$brand-theme-color !important;\n\t\t\t\t\t\t\t\t padding-left: 20rpx;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\t\t\t\t }\n\t\t\t }\n\t\t\t\n\t\t }\n\t\t \n\t\t \n\t\t\n\t }\n</style>\n\n","import MiniProgramPage from '/Users/yxy/work/java/demo/yxy-springboot-eng-sentence/yxy-springboot-eng-sentence/my-eng/pages/my/collect/collectSentence.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}