{"version":3,"names":["common_utils_common","getSystemWechatUserForward","playMap","Map","noData","common_vendor","ref","queryParams","pageNum","pageSize","onLoad","e","_e$collectType","collectType","_e$name","name","index","setNavigationBarTitle","title","getEngMain","onPullDownRefresh","onReachBottom","__f__","value","datas","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","code","res","wrap","_callee$","_context","prev","next","common_api_apis","apiGetMyCollect","sent","concat","_toConsumableArray2","data","length","stopPullDownRefresh","hideLoading","stop","_x","apply","arguments","eye","hide","deleteFavorite","play","type","eid","id","findItemById","isPlay","has","get","forEach","findWordById","audioUrl","common_utils_request","getDetailVoicePath","webAudioPath","getWordVoicePath","innerAudioContext","createInnerAudioContext","autoplay","src","onPlay","onError","onEnded","set","find","item","includes","wx","createPage","MiniProgramPage"],"sources":["collectSentence.vue","collectSentence.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"layoutCls\">\n\t\t<view class=\"scrollCls\" scroll-y=\"true\" scroll-x=\"false\">\n\t\t\t<view class=\"contentCls\" v-for=\"item in datas\" :key=\"item.id\" v-if=\"datas\">\n\t\t\t\t<view class=\"favoriteTimeMainCls\" >\n\t\t\t\t\t<!-- <view class=\"favoriteTextCls\">收藏时间:</view> -->\n\t\t\t\t\t<view class=\"favoriteTimeCls\">{{item.createTime}}</view>\n\t\t\t\t\t<view class=\"favoriteDelCls\"><uni-icons type=\"trash\" size=\"25\"  @click=\"deleteFavorite(item)\"></uni-icons></view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"zhCls\" >\n\t\t\t\t\t{{item.znName}}\n\t\t\t\t</view>\n\t\t\t\t<view class=\"translationCls\">\n\t\t\t\t\t<view class=\"engCls\" >\n\t\t\t\t\t\t{{item.hide=='1'?'***':item.enName}}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"hidCls\">\n\t\t\t\t\t\t<uni-icons :type=\"item.hide=='1'?'eye-slash':'eye'\" size=\"25\" @click=\"eye(item)\"></uni-icons>\n\t\t\t\t\t\t<view class=\"play\" @click.stop=\"play(item, queryParams.collectType)\">\n\t\t\t\t\t\t\t<a-trumpet :isPlay=\"item.isPlay\" size=\"25\" color=\"#28B389\"></a-trumpet>\n\t\t\t\t\t\t\t<!-- <uni-icons type=\"sound\" size=\"30\"  @click=\"play(item)\"></uni-icons> -->\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view> \n\t\t\t<view class=\"loadingLayout\" v-if=\"noData || datas.length\">\n\t\t\t\t<uni-load-more :status=\"noData?'noMore':'loading'\"/>\n\t\t\t</view>\n\t\t</view> \n\t</view>\n</template>\n\n<script setup> \n\timport {ref} from \"vue\";\n\timport {getSystemWechatUserForward} from \"@/common/utils/common.js\";\n\timport {onLoad,onUnload,onReachBottom,onShareAppMessage,onShareTimeline,onPullDownRefresh} from \"@dcloudio/uni-app\"\n\timport {apiGetMyCollect} from \"@/common/api/apis.js\"\n\timport {getDetailVoicePath,getWordVoicePath} from \"@/common/utils/request.js\";\n\t\n\tgetSystemWechatUserForward();\n\tconst playMap = new Map();\n\t//没有更多\n\tconst noData = ref(false);\n\t\n\tconst queryParams = {\n\t\tpageNum:1,\n\t\tpageSize:10\n\t}\n\t\n\tonLoad((e)=>{\n\t\tlet {collectType=null,name=null} = e;\n\t\tqueryParams.collectType = collectType;\n\t\t//修改导航标题\n\t\tuni.setNavigationBarTitle({\n\t\t\ttitle:name\n\t\t});\n\t\tgetEngMain(); \n\t});\n\t\n\t\n\t//下拉刷新\n\tonPullDownRefresh(()=>{\n\t\tqueryParams.pageNum = 1;\n\t\tgetEngMain();\n\t})\n\t\n\t\n\t//触底加载更多\n\tonReachBottom(()=>{\n\t\tconsole.log(\"触地了-->\");\n\t\tif(noData.value) return;\n\t\tqueryParams.pageNum++\n\t\tgetEngMain();\n\t})\n\t\n\t//我收藏的句子\n\tconst datas=ref(null);\n\t\n\tconst getEngMain =async(code)=>{\n\t\t// uni.showLoading({\n\t\t// \ttitle:\"加载中..\"\n\t\t// })\n\t\tlet res =await apiGetMyCollect(queryParams); \n\t\tconsole.log(\"获取到的收藏数据->\",res);  \n\t\tdatas.value  =  [...datas.value,...res.data] ;\n\t\t\n\t\tif(queryParams.pageSize > res.data.length){\n\t\t\tnoData.value = true;\n\t\t}\n\t\t\n\t\tuni.stopPullDownRefresh();\n\t\tuni.hideLoading();\n\t\t\n\t}\n\t\n\t\n\t\n\t// 显示或隐藏\n\tfunction eye(e){\n\t\te.hide = !e.hide;\n\t}\n\tfunction deleteFavorite(e){\n\t\t\n\t}\n\tfunction play(e, type){\n\t\tlet eid = type + e.id;\n\t\tconsole.log(\"进入到播放区\")\n\t\tconsole.log(\"------->\",e.id)\n\t\tconsole.log(\"------->\",e.value)\n\t\tconsole.log(\"------->\",findItemById(e.id))\n\t\t\n\t\te.isPlay = !e.isPlay;\n\t\tif(!e.isPlay){\n\t\t\tif(playMap != null && playMap.has(eid)){\n\t\t\t\tplayMap.get(eid).stop();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif(playMap != null){\n\t\t\tplayMap.forEach((value, id) => {\n\t\t\t  value.stop();\n\t\t\t  if(type == \"detail\"){\n\t\t\t\t  findItemById(id).isPlay = false;\n\t\t\t  }else{\n\t\t\t\t  findWordById(id).isPlay = false;\n\t\t\t  }\n\t\t\t});\n\t\t}\n\t\te.isPlay = true;\n\t\t\n\t\tlet audioUrl = null; \n\t\tif(type == \"detail\"){\n\t\t\taudioUrl = getDetailVoicePath(e.webAudioPath);\n\t\t}else{\n\t\t\taudioUrl = getWordVoicePath(e.webAudioPath);\n\t\t}\n\t\t\n\t\tconsole.log(\"音频地址->\",audioUrl);\n\t\tconst innerAudioContext = uni.createInnerAudioContext();\n\t\tinnerAudioContext.autoplay = true;\n\t\tinnerAudioContext.src = audioUrl;\n\t\tinnerAudioContext.onPlay(() => {\n\t\t  console.log('开始播放');\n\t\t  uni.hideLoading();\n\t\t});\n\t\tinnerAudioContext.onError((res) => {\n\t\t\tconsole.log(res)\n\t\t  // console.log(res.errMsg);\n\t\t  // console.log(res.errCode);\n\t\t  uni.hideLoading();\n\t\t});\n\t\tinnerAudioContext.onEnded((res)=>{\n\t\t\tconsole.log(\"停止播放->\",res);\n\t\t\te.isPlay = false;\n\t\t\tuni.hideLoading();\n\t\t})\n\t\t\n\t\tplayMap.set(eid, innerAudioContext);\n\t}\n\t \n\tfunction findItemById(id) {\n\t    return datas.value.find(item => id.includes(item.id));\n\t}\n\t   \n\t  \n</script>\n\n<style lang=\"scss\" scoped>\n.layoutCls{\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\tposition: relative; \n\t\t .scrollCls{  \n\t\t\t// margin-top: 20rpx;\n\t\t\twidth: 100%; \n\t\t\theight: 100vh;\n\t\t\tpadding: 20rpx; \n\t\t\tbox-sizing: border-box; \n\t\t\t.contentCls{ \n\t\t\t\tmargin-top: 60rpx; \n\t\t\t\tbackground: #f3f7f8; \n\t\t\t\tborder-radius: 20rpx;\n\t\t\t\tpadding: 15rpx;  \n\t\t\t\t\n\t\t\t\t.favoriteTimeMainCls{\n\t\t\t\t\tfont-size: 25rpx;\n\t\t\t\t\tpadding: 10rpx;\n\t\t\t\t\tborder-bottom: 1px solid #ebf1f3; \n\t\t\t\t\tdisplay: flex;  \n\t\t\t\t\talign-items: center;\n\t\t\t\t\tbackground: rgba(0, 0, 0, 0.1); \n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tvertical-align: middle;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\t// color: #fff;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tmargin-top: -50rpx;\n\t\t\t\t\t// padding: 20rpx;\n\t\t\t\t\tborder-radius: 20rpx;\n\t\t\t\t\t// top: 0rpx;\n\t\t\t\t\t.favoriteTextCls{\n\t\t\t\t\t\t// background: yellow;\n\t\t\t\t\t\tdisplay: inline-block; \n\t\t\t\t\t\tvertical-align: middle\n\t\t\t\t\t}\n\t\t\t\t\t.favoriteTimeCls{\n\t\t\t\t\t\tdisplay: inline-block; \n\t\t\t\t\t\t// color:$text-font-color-2;\n\t\t\t\t\t\tvertical-align: middle;\n\t\t\t\t\t\tfont-family: monospace; \n\t\t\t\t\t\tfont-weight: normal; \n\t\t\t\t\t\t// width: 19ch;\n\t\t\t\t\t\t// padding-left: 10rpx;\n\t\t\t\t\t\t// background: red;\n\t\t\t\t\t}\n\t\t\t\t\t.favoriteDelCls{\n\t\t\t\t\t\tdisplay: inline-block; \n\t\t\t\t\t\tvertical-align: middle;\n\t\t\t\t\t\t// right: 0;\n\t\t\t\t\t\t:deep(){\n\t\t\t\t\t\t\t.uni-icons{\n\t\t\t\t\t\t\t\tcolor:$brand-theme-color !important;\n\t\t\t\t\t\t\t\t padding-left: 20rpx;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.zhCls{\n\t\t\t\t\tfont-size: 25rpx;\n\t\t\t\t\tpadding: 10rpx;\n\t\t\t\t\tborder-bottom: 1px solid #ebf1f3;\n\t\t\t\t}\n\t\t\t\t.translationCls{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tposition: relative; \n\t\t\t\t\t.engCls{\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\twidth: 0; \n\t\t\t\t\t\tpadding: 10rpx;\n\t\t\t\t\t}\n\t\t\t\t\t.hidCls{\n\t\t\t\t\t\twidth: 150rpx;\t \n\t\t\t\t\t\t// background: red;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t// position: absolute; \n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tright: 0;\n\t\t\t\t\t\t:deep(){\n\t\t\t\t\t\t\t.uni-icons{\n\t\t\t\t\t\t\t\tcolor:$brand-theme-color !important;\n\t\t\t\t\t\t\t\t padding-left: 20rpx;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\t\t\t\t }\n\t\t\t }\n\t\t\t\n\t\t }\n\t\t \n\t\t \n\t\t\n\t }\n</style>\n\n","import MiniProgramPage from '/Users/yxy/work/前端/uniapp/my-eng/pages/my/collect/collectSentence.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}