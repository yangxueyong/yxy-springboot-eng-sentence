{"version":3,"file":"time-count-down.js","sources":["components/time-count-down/time-count-down.vue","/Users/yxy/work/前端/uniapp/my-preschool/components/time-count-down/time-count-down.vue?type=component"],"sourcesContent":["<template>\n  <view class=\"countdownCls\">\n    {{ formattedTime }}\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onBeforeUnmount } from 'vue';\n\nconst props = defineProps({\n  seconds: { type: Number, required: true }, // 传入的总秒数\n  autoStart: { type: Boolean, default: true }, // 是否自动开始\n});\n\nconst emit = defineEmits(['countDownFinish']); // 倒计时结束事件\n\nlet remainingSeconds = ref(props.seconds);\nlet expendSeconds = ref(0);\nlet timer = null;\n\n// 计算格式化时间（HH:mm:ss）\nconst formattedTime = ref(\"00:00:00\");\n\nfunction formatTime(type,remainingSeconds){\n\tconst hours = Math.floor(remainingSeconds.value / 3600);\n\tconst minutes = Math.floor((remainingSeconds.value % 3600) / 60);\n\tconst seconds = remainingSeconds.value % 60;\n\t\n\tlet formattedTime2 = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n\t// console.log(\"formattedTime2->\",formattedTime2);\n\tif(\"calcDown\" == type){\n\t\tformattedTime.value = formattedTime2;\n\t}\n\treturn formattedTime2;\n}\n\n// 开始倒计时\nfunction start(mySeconds) {\n  remainingSeconds = ref(mySeconds);\n  expendSeconds = ref(0);\n  formatTime(\"calcDown\",remainingSeconds);\n  if (timer) {\n\t  clearInterval(timer);\n  }\n  timer = setInterval(() => {\n    if (remainingSeconds.value <= 0) {\n      clearInterval(timer); \n      emit('countDownFinish');\n    } else {\n      remainingSeconds.value = remainingSeconds.value - 1;\n\t   expendSeconds.value ++ ;\n    }\n\tformatTime(\"calcDown\",remainingSeconds);\n  }, 1000);\n};\n\n//获取消耗的时间\nfunction getExpendTime(){\n\tconsole.log(\"正在获取->\", expendSeconds);\n\treturn formatTime(\"calcExpand\",expendSeconds);\n}\n\n// 停止倒计时\nconst stop = () => {\n  if (timer) clearInterval(timer);\n};\n\n// 重置倒计时\nconst reset = (newSeconds) => {\n  remainingSeconds.value = newSeconds ?? props.seconds;\n};\n\n// 自动开始（如果 autoStart=true）\nonMounted(() => {\n  // if (props.autoStart) start();\n});\n\n// 组件卸载时清除定时器\nonBeforeUnmount(() => {\n  stop();\n});\n\n// 暴露方法，方便父组件调用\ndefineExpose({ start, stop, reset, getExpendTime });\n</script>\n\n<style scoped>\n.countdownCls {\n  font-family: monospace; /* 等宽字体，避免数字跳动 */\n  font-size: 24px;\n  color: #fff;\n  background-color: #4cd964;\n  padding: 10rpx;\n  border-radius: 20rpx;\n}\n</style>","import Component from '/Users/yxy/work/前端/uniapp/my-preschool/components/time-count-down/time-count-down.vue'\nwx.createComponent(Component)"],"names":["ref","remainingSeconds","uni","onMounted","onBeforeUnmount"],"mappings":";;;;;;;;;;;;AASA,UAAM,QAAQ;AAKd,UAAM,OAAO;AAEb,QAAI,mBAAmBA,cAAG,IAAC,MAAM,OAAO;AACxC,QAAI,gBAAgBA,cAAAA,IAAI,CAAC;AACzB,QAAI,QAAQ;AAGZ,UAAM,gBAAgBA,cAAAA,IAAI,UAAU;AAEpC,aAAS,WAAW,MAAKC,mBAAiB;AACzC,YAAM,QAAQ,KAAK,MAAMA,kBAAiB,QAAQ,IAAI;AACtD,YAAM,UAAU,KAAK,MAAOA,kBAAiB,QAAQ,OAAQ,EAAE;AAC/D,YAAM,UAAUA,kBAAiB,QAAQ;AAEzC,UAAI,iBAAiB,GAAG,MAAM,SAAU,EAAC,SAAS,GAAG,GAAG,CAAC,IAAI,QAAQ,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC,IAAI,QAAQ,SAAU,EAAC,SAAS,GAAG,GAAG,CAAC;AAEvI,UAAG,cAAc,MAAK;AACrB,sBAAc,QAAQ;AAAA,MACtB;AACD,aAAO;AAAA,IACR;AAGA,aAAS,MAAM,WAAW;AACxB,yBAAmBD,cAAAA,IAAI,SAAS;AAChC,sBAAgBA,cAAAA,IAAI,CAAC;AACrB,iBAAW,YAAW,gBAAgB;AACtC,UAAI,OAAO;AACV,sBAAc,KAAK;AAAA,MACnB;AACD,cAAQ,YAAY,MAAM;AACxB,YAAI,iBAAiB,SAAS,GAAG;AAC/B,wBAAc,KAAK;AACnB,eAAK,iBAAiB;AAAA,QAC5B,OAAW;AACL,2BAAiB,QAAQ,iBAAiB,QAAQ;AACpD,wBAAc;AAAA,QACb;AACJ,mBAAW,YAAW,gBAAgB;AAAA,MACpC,GAAE,GAAI;AAAA,IACT;AAGA,aAAS,gBAAe;AACvBE,oBAAA,MAAA,MAAA,OAAA,wDAAY,UAAU,aAAa;AACnC,aAAO,WAAW,cAAa,aAAa;AAAA,IAC7C;AAGA,UAAM,OAAO,MAAM;AACjB,UAAI;AAAO,sBAAc,KAAK;AAAA,IAChC;AAGA,UAAM,QAAQ,CAAC,eAAe;AAC5B,uBAAiB,QAAQ,cAAc,MAAM;AAAA,IAC/C;AAGAC,kBAAAA,UAAU,MAAM;AAAA,IAEhB,CAAC;AAGDC,kBAAAA,gBAAgB,MAAM;AACpB;IACF,CAAC;AAGD,aAAa,EAAE,OAAO,MAAM,OAAO,cAAe,CAAA;;;;;;;;;AClFlD,GAAG,gBAAgB,SAAS;"}