{"version":3,"file":"custom-set-num.js","sources":["components/custom-set-num/custom-set-num.vue","/Users/yxy/work/前端/uniapp/my-preschool/components/custom-set-num/custom-set-num.vue?type=component"],"sourcesContent":["<template>\n\t<scroll-view class=\"customMumPopup\" scroll-y=\"true\">\n\t\t<view class=\"uni-common-mt\">\n\t\t\t<view class=\"uni-form-item uni-column\">\n\t\t\t\t<view class=\"title\">开始数字</view>\n\t\t\t\t<input class=\"uni-input\" type=\"number\" v-model=\"iptBeginValue\" maxlength=\"2\" placeholder=\"请输入开始数字\" />\n\t\t\t</view>\n\t\t\t<view class=\"uni-form-item uni-column\">\n\t\t\t\t<view class=\"title\">结束数字</view>\n\t\t\t\t<input class=\"uni-input\" type=\"number\" v-model=\"iptEndValue\" maxlength=\"3\" placeholder=\"请输入结束数字\" />\n\t\t\t</view>\n\t\t\t<view class=\"uni-form-item uni-column\">\n\t\t\t\t<view class=\"title\">游戏时间，单位为秒</view>\n\t\t\t\t<input class=\"uni-input\" type=\"number\" v-model=\"iptSecondValue\"  maxlength=\"4\" placeholder=\"游戏时间不能小于5秒或者大于7200秒\" />\n\t\t\t</view>\n\t\t\t<view class=\"customNumBtnCls\">\n\t\t\t\t<button class=\"mini-btn\" type=\"primary\" size=\"mini\" @click=\"onNumFinish\">确 定</button>\n\t\t\t</view>\t\n\t\t</view>\n\t</scroll-view> \n</template>\n\n<script setup>\n\timport { ref, computed, onMounted, onBeforeUnmount } from 'vue';\n\tconst emit = defineEmits(['customNumFinish']);  \n\tconst iptBeginValue = ref(null);\n\tconst iptEndValue = ref(null);\n\tconst iptSecondValue = ref(null);\n\t\n\tfunction onNumFinish(){\n\t\tif(iptBeginValue.value <= 0){\n\t\t\tuni.showModal({\n\t\t\t\ttitle: \"温馨提示\",\n\t\t\t\tcontent: \"开始的数字不能小于0\",\n\t\t\t\tshowCancel: false\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif(iptEndValue.value <= 0){\n\t\t\tuni.showModal({\n\t\t\t\ttitle: \"温馨提示\",\n\t\t\t\tcontent: \"结束的数字不能小于0\",\n\t\t\t\tshowCancel: false\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif(iptEndValue.value <= iptBeginValue.value){\n\t\t\tuni.showModal({\n\t\t\t\ttitle: \"温馨提示\",\n\t\t\t\tcontent: \"结束的数字不能小于或等于开始的数字\",\n\t\t\t\tshowCancel: false\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tlet cha = iptEndValue.value - iptBeginValue.value ;\n\t\tif(cha < 4 || cha > 100){\n\t\t\tuni.showModal({ \n\t\t\t\ttitle: \"温馨提示\",\n\t\t\t\tcontent: \"数字相差不能少于4个或者大于100个\",\n\t\t\t\tshowCancel: false\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif(iptSecondValue.value < 5 || iptSecondValue.value > 7200){\n\t\t\tuni.showModal({\n\t\t\t\ttitle: \"温馨提示\",\n\t\t\t\tcontent: \"游戏时间不能小于5秒或者大于7200秒\",\n\t\t\t\tshowCancel: false\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t \n\t   let fontSize = \"30rpx\";\n\t   if(cha <= 10){\n\t\t   fontSize = \"100rpx\";\n\t   }else if(cha <= 16){\n\t\t   fontSize = \"80rpx\";\n\t   }else if(cha <= 25){\n\t\t   fontSize = \"70rpx\";\n\t   }else if(cha <= 36){\n\t\t   fontSize = \"60rpx\";\n\t   }else if(cha <= 49){\n\t\t   fontSize = \"50rpx\";\n\t   }else if(cha <= 64){\n\t\t   fontSize = \"40rpx\";\n\t   }\n\t   \n\t   let { width, height } = calculateLayout(cha + 1);\n\t   \n\t   var myCustom = {\n\t\t   id : new Date().getTime(),\n\t\t   beginNum : iptBeginValue.value,\n\t\t   endNum : iptEndValue.value,\n\t\t   typeKey:\"myCustom\",\n\t\t   \"itemCls\":\"v_item\",\n\t\t   \"fontSize\":fontSize,\n\t\t   \"gameTime\":iptSecondValue.value,\n\t\t   \"colNum\":width,\n\t\t   \"numSum\":iptEndValue.value,\n\t\t   \"title\":\"自定义 \" + width+\" ✖️ \" + height,\n\t\t   \"note\":iptBeginValue.value + \"-\"+ iptEndValue.value +\"的数字\"\n\t   }\n\t\tconsole.log(\"完成-->\");\n\t\temit(\"customNumFinish\",myCustom);\n\t}\n\t\n\tfunction calculateLayout(num) {\n\t  if (num <= 0) return [0, 0];\n\t  \n\t  // 计算最接近的平方根作为初始宽度\n\t  let width = Math.ceil(Math.sqrt(num));\n\t  let height = width;\n\t  \n\t  // 尝试优化布局，使宽度和高度尽可能接近\n\t  while (width * height >= num) {\n\t    // 如果减少高度后仍然能容纳所有数字\n\t    if ((width - 1) * height >= num) {\n\t      width--;\n\t    } \n\t    // 如果减少宽度后不能容纳，尝试减少高度\n\t    else if (width * (height - 1) >= num) {\n\t      height--;\n\t    } else {\n\t      break;\n\t    }\n\t  }\n\t  \n\t  // 确保最终布局能容纳所有数字\n\t  while (width * height < num) {\n\t    if (width <= height) {\n\t      width++;\n\t    } else {\n\t      height++;\n\t    }\n\t  }\n\t  \n\t  // 返回宽度和高度，确保宽度 >= 高度（更接近正方形）\n\t  return width >= height ? {width, height} : {height, width};\n\t} \n</script>\n\n<style  lang=\"scss\" scoped>\n\t\t.customMumPopup{\n\t\t\tbackground: #fff;\n\t\t\t// padding: 130rpx;\n\t\t\tborder-radius: 30rpx 30rpx 30rpx 30rpx;\n\t\t\twidth: 80vw;\n\t\t\tmax-height: 60vh;\n\t\t\toverflow: hidden; \n\t\t\tfont-size: 30rpx; \n\t\t}\n\t\t.uni-common-mt{\n\t\t\tmargin: 30rpx;\n\t\t\tbackground-color: #fff;\n\t\t}\n\t\tinput{\n\t\t\tpadding: 20rpx 5rpx;\n\t\t\t  font-size: 16px;\n\t\t\t  line-height: 1.5;\n\t\t\t  color: #333;\n\t\t\t  background-color: #fff;\n\t\t\t  border: 1px solid #ddd;\n\t\t\t  border-radius: 6px;\n\t\t\t  transition: all 0.3s ease;\n\t\t\t  // box-sizing: border-box;\n\t\t\t  // outline: none;\n\t\t\tmargin-bottom: 30rpx;\n\t\t\tmargin-top: 10rpx;\n\t\t}\n\t\t.customNumBtnCls{\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;  /* 水平居中 */\n\t\t\talign-items: center;     /* 垂直居中 */\n\t\t\t// background-color: #18a058;\n\t\t}\n</style>","import Component from '/Users/yxy/work/前端/uniapp/my-preschool/components/custom-set-num/custom-set-num.vue'\nwx.createComponent(Component)"],"names":["ref","uni"],"mappings":";;;;;;AAwBC,UAAM,OAAO;AACb,UAAM,gBAAgBA,kBAAI,IAAI;AAC9B,UAAM,cAAcA,kBAAI,IAAI;AAC5B,UAAM,iBAAiBA,kBAAI,IAAI;AAE/B,aAAS,cAAa;AACrB,UAAG,cAAc,SAAS,GAAE;AAC3BC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,QAChB,CAAI;AACD;AAAA,MACA;AACD,UAAG,YAAY,SAAS,GAAE;AACzBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,QAChB,CAAI;AACD;AAAA,MACA;AACD,UAAG,YAAY,SAAS,cAAc,OAAM;AAC3CA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,QAChB,CAAI;AACD;AAAA,MACA;AACD,UAAI,MAAM,YAAY,QAAQ,cAAc;AAC5C,UAAG,MAAM,KAAK,MAAM,KAAI;AACvBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,QAChB,CAAI;AACD;AAAA,MACA;AACD,UAAG,eAAe,QAAQ,KAAK,eAAe,QAAQ,MAAK;AAC1DA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,QAChB,CAAI;AACD;AAAA,MACA;AAEC,UAAI,WAAW;AACf,UAAG,OAAO,IAAG;AACZ,mBAAW;AAAA,MAChB,WAAa,OAAO,IAAG;AAClB,mBAAW;AAAA,MAChB,WAAa,OAAO,IAAG;AAClB,mBAAW;AAAA,MAChB,WAAa,OAAO,IAAG;AAClB,mBAAW;AAAA,MAChB,WAAa,OAAO,IAAG;AAClB,mBAAW;AAAA,MAChB,WAAa,OAAO,IAAG;AAClB,mBAAW;AAAA,MACX;AAED,UAAI,EAAE,OAAO,OAAM,IAAK,gBAAgB,MAAM,CAAC;AAE/C,UAAI,WAAW;AAAA,QACd,KAAK,oBAAI,KAAM,GAAC,QAAS;AAAA,QACzB,UAAW,cAAc;AAAA,QACzB,QAAS,YAAY;AAAA,QACrB,SAAQ;AAAA,QACR,WAAU;AAAA,QACV,YAAW;AAAA,QACX,YAAW,eAAe;AAAA,QAC1B,UAAS;AAAA,QACT,UAAS,YAAY;AAAA,QACrB,SAAQ,SAAS,QAAM,SAAS;AAAA,QAChC,QAAO,cAAc,QAAQ,MAAK,YAAY,QAAO;AAAA,MACrD;AACHA,oBAAAA,MAAY,MAAA,OAAA,uDAAA,OAAO;AACnB,WAAK,mBAAkB,QAAQ;AAAA,IAC/B;AAED,aAAS,gBAAgB,KAAK;AAC5B,UAAI,OAAO;AAAG,eAAO,CAAC,GAAG,CAAC;AAG1B,UAAI,QAAQ,KAAK,KAAK,KAAK,KAAK,GAAG,CAAC;AACpC,UAAI,SAAS;AAGb,aAAO,QAAQ,UAAU,KAAK;AAE5B,aAAK,QAAQ,KAAK,UAAU,KAAK;AAC/B;AAAA,QACD,WAEQ,SAAS,SAAS,MAAM,KAAK;AACpC;AAAA,QACP,OAAY;AACL;AAAA,QACD;AAAA,MACF;AAGD,aAAO,QAAQ,SAAS,KAAK;AAC3B,YAAI,SAAS,QAAQ;AACnB;AAAA,QACP,OAAY;AACL;AAAA,QACD;AAAA,MACF;AAGD,aAAO,SAAS,SAAS,EAAC,OAAO,OAAM,IAAI,EAAC,QAAQ,MAAK;AAAA,IAC1D;;;;;;;;;;;;;;;ACzIF,GAAG,gBAAgB,SAAS;"}